{"ast":null,"code":"import { io } from \"socket.io-client\";\nconst SOCKET_URL = process.env.REACT_APP_SOCKET_URL || \"http://localhost:5000\";\nclass SocketService {\n  constructor() {\n    this.socket = null;\n    this.listeners = {};\n  }\n  connect() {\n    if (this.socket) return;\n    this.socket = io(SOCKET_URL);\n    this.socket.on(\"connect\", () => {\n      console.log(\"Socket connected\");\n      this.authenticate();\n    });\n    this.socket.on(\"disconnect\", () => {\n      console.log(\"Socket disconnected\");\n    });\n    this.socket.on(\"connect_error\", error => {\n      console.error(\"Socket connection error:\", error);\n    });\n  }\n  authenticate() {\n    const token = localStorage.getItem(\"token\");\n    if (token) {\n      this.socket.emit(\"authenticate\", token);\n    }\n  }\n  disconnect() {\n    if (this.socket) {\n      this.socket.disconnect();\n      this.socket = null;\n    }\n  }\n  on(event, callback) {\n    if (!this.socket) this.connect();\n    this.socket.on(event, callback);\n\n    // Store the listener for cleanup\n    if (!this.listeners[event]) {\n      this.listeners[event] = [];\n    }\n    this.listeners[event].push(callback);\n    return () => this.off(event, callback);\n  }\n  off(event, callback) {\n    if (!this.socket) return;\n    if (callback) {\n      this.socket.off(event, callback);\n      if (this.listeners[event]) {\n        this.listeners[event] = this.listeners[event].filter(cb => cb !== callback);\n      }\n    } else {\n      this.socket.off(event);\n      delete this.listeners[event];\n    }\n  }\n  removeAllListeners() {\n    if (!this.socket) return;\n    Object.keys(this.listeners).forEach(event => {\n      this.listeners[event].forEach(callback => {\n        this.socket.off(event, callback);\n      });\n      delete this.listeners[event];\n    });\n  }\n}\nconst socketService = new SocketService();\nexport default socketService;","map":{"version":3,"names":["io","SOCKET_URL","process","env","REACT_APP_SOCKET_URL","SocketService","constructor","socket","listeners","connect","on","console","log","authenticate","error","token","localStorage","getItem","emit","disconnect","event","callback","push","off","filter","cb","removeAllListeners","Object","keys","forEach","socketService"],"sources":["D:/Website Learners Assignment/frontend/src/services/socket.js"],"sourcesContent":["import { io } from \"socket.io-client\"\n\nconst SOCKET_URL = process.env.REACT_APP_SOCKET_URL || \"http://localhost:5000\"\n\nclass SocketService {\n  constructor() {\n    this.socket = null\n    this.listeners = {}\n  }\n\n  connect() {\n    if (this.socket) return\n\n    this.socket = io(SOCKET_URL)\n\n    this.socket.on(\"connect\", () => {\n      console.log(\"Socket connected\")\n      this.authenticate()\n    })\n\n    this.socket.on(\"disconnect\", () => {\n      console.log(\"Socket disconnected\")\n    })\n\n    this.socket.on(\"connect_error\", (error) => {\n      console.error(\"Socket connection error:\", error)\n    })\n  }\n\n  authenticate() {\n    const token = localStorage.getItem(\"token\")\n    if (token) {\n      this.socket.emit(\"authenticate\", token)\n    }\n  }\n\n  disconnect() {\n    if (this.socket) {\n      this.socket.disconnect()\n      this.socket = null\n    }\n  }\n\n  on(event, callback) {\n    if (!this.socket) this.connect()\n\n    this.socket.on(event, callback)\n\n    // Store the listener for cleanup\n    if (!this.listeners[event]) {\n      this.listeners[event] = []\n    }\n    this.listeners[event].push(callback)\n\n    return () => this.off(event, callback)\n  }\n\n  off(event, callback) {\n    if (!this.socket) return\n\n    if (callback) {\n      this.socket.off(event, callback)\n      if (this.listeners[event]) {\n        this.listeners[event] = this.listeners[event].filter((cb) => cb !== callback)\n      }\n    } else {\n      this.socket.off(event)\n      delete this.listeners[event]\n    }\n  }\n\n  removeAllListeners() {\n    if (!this.socket) return\n\n    Object.keys(this.listeners).forEach((event) => {\n      this.listeners[event].forEach((callback) => {\n        this.socket.off(event, callback)\n      })\n      delete this.listeners[event]\n    })\n  }\n}\n\nconst socketService = new SocketService()\n\nexport default socketService\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}